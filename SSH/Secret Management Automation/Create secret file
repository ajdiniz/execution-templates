expect "*$"

# Clear the old file
exec "rm dsm_secret_injection.json"
expect "*$"

# Inject secrets into a file
exec "echo 'APP_NAME: [#APP_NAME#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'APP_AUTH_UNIQUE_KEY: [#APP_AUTH_UNIQUE_KEY#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'APP_AUTH_TYPE: [#APP_AUTH_TYPE#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'APP_AUTH_CLIENT_ID: [#APP_AUTH_CLIENT_ID#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'APP_AUTH_CLIENT_SECRET: [#APP_AUTH_CLIENT_SECRET#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'APP_AUTH_CONSUMER_KEY: [#APP_AUTH_CONSUMER_KEY#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'APP_AUTH_CONSUMER_SECRET: [#APP_AUTH_CONSUMER_SECRET#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'APP_AUTH_TOKEN: [#APP_AUTH_TOKEN#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'APP_AUTH_TOKEN_SECRET: [#APP_AUTH_TOKEN_SECRET#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'ACCESS_KEY_ID: [#ACCESS_KEY_ID#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'SECRET_ACCESS_KEY: [#SECRET_ACCESS_KEY#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'ACCESS_KEY_TTL: [#ACCESS_KEY_TTL#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'CREDENTIAL_HOSTNAME: [#CREDENTIAL_HOSTNAME#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'CREDENTIAL_USERNAME: [#CREDENTIAL_USERNAME#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'CREDENTIAL_PASSWORD: [#CREDENTIAL_PASSWORD#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'CREDENTIAL_ADDITIONAL_INFORMATION: [#CREDENTIAL_ADDITIONAL_INFORMATION#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'CREDENTIAL_TTL: [#CREDENTIAL_TTL#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'SECRET_NAME: [#SECRET_NAME#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'SECRET_IDENTIFIER: [#SECRET_IDENTIFIER#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'SECRET_VERSION: [#SECRET_VERSION#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'SECRET_ENGINE: [#SECRET_ENGINE#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'SECRET_EXPIRATION_DATE: [#SECRET_EXPIRATION_DATE#]' >> dsm_secret_injection.json"
expect "*$"
exec "echo 'SECRET_DATA: [#SECRET_DATA#]' >> dsm_secret_injection.json"
expect "*$"

# Exit the server
exec "exit"